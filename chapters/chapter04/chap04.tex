%
% File: chap04.tex
% Author: Henry Semenenko
% Description: Chip based MDI-QKD
%
% Set the graphics path to find figures
\graphicspath{{./chapters/chapter04/fig04/}}

\let\textcircled=\pgftextcircled
\chapter[Chip-Based Measurement-Device-Independent QKD]{Chip-Based Measurement-Device-Independent Quantum Key Distribution}
\label{chap:mdiqkd}

In this section, we will be experimentally demonstrating \ac{MDI} \cite{mdi-qkd} using integrated \ac{InP} transmitter devices. The receiver will be a fibre setup.

%=======
\section{Measurement-Device-Independent Quantum Key Distribution}
\label{sec:mdi-qkd}

Unlike a traditional point-to-point key exchange, \ac{MDI} introduces third party (Charlie) who mediates the exchange by announcing correlations between pulses sent by Alice and Bob. Importantly, it improves security by removing all, current and future, side-channels on the detectors \cite{}. This is an important step as the detectors are often vulnerable to attacks due to their complexity \cite{}.

Secondly, it removes the asymmetry between Alice and Bob which allows for simpler metropolitan networks without reducing security with trusted nodes. This will be discussed further in chapter \ref{chap:node}.

\subsection{Protocol}

\begin{figure}[tbp]
	\centering
	\includegraphics[scale=0.25]{MDI-QKD_Protocol.png}
	\caption[MDI-QKD protocol]{Measurement-device-independent quantum key distribution protocol.}
	\label{fig:mdi_protocol}
\end{figure}

An outline of the protocol is shown in figure \ref{fig:mdi_protocol}. We will use a four decoy state protocol \cite{zhou2016} which treats the $Z$ and $X$ bases separately. The $Z$ basis is used entirely to generate keys, while the $X$ basis is used to bound knowledge gained by an eavesdropper. This is optimal for the symmetric case. The asymmetric case needs to be dealt with slightly differently \cite{wang2018}.

\begin{enumerate}
	\item \textbf{Preparation:} Alice and Bob independently and randomly choose \acp{wcs} from
	\item \textbf{Measurement:} Charlie performs joint Bell state projections on states from Alice and Bob
	\item \textbf{Announcement:}
	\item \textbf{Parameter Estimation:}
\end{enumerate}

\subsection{Security and Key Rates}

As we are not using a true single photon source, we need to be able to bound any knowledge gained by Eve through a photon number splitting attack. This is done through decoy-state \cite{}. 

Here we used a four intensity decoy state protocol where we consider four sources: $o, x, y, z$. The $o$ source is vacuum, $x$ and $y$ are decoy pulses in the $X$ basis with average photon numbers $\mu_x$ and $\mu_x$, respectively. Finally, the $z$ source emits pulses with intensity $\mu_z$ in the $Z$ basis. 

The estimate key rate of \ac{MDI} per pulse in the infinite case is given as

\begin{equation}
	R = (p_z)^2 p_{11}^Z Y_{11}^Z \left(1 - H_2(E_{11}^X)\right) - Q_{S,S}^Z f_e E_{S,S}^Z H_2(E_{\mu_s\mu_s}^Z)
\end{equation}
where $Y_{11}^Z$ and $e_{11}^X$ are the yield in the $Z$ basis and error in the $X$ basis, respectively, when Alice and Bob both sent single photons. These quantities are not directly measurable so we will need to bound them. $Q_{S,S}^Z$ and $E_{S,S}^Z$ are the gain and error in the $Z$ basis and both can be measured directly. Finally, we introduce the error correction efficiency, $f$, and the binary entropy function defined as
\begin{equation}
	H_2(x) = -x\mathrm{log}_2(x) - (1-x)\mathrm{log}_2(1-x).
\end{equation}

Therefore, we define the upper bound of the secret key rate as

\begin{equation}
	\underline{R} \geq R
\end{equation}
for the lower and upper bounds of $Y_{11}^Z$ and $E_{11}^X$, respectively. These bounds can be found through the decoy state technique \cite{}. In essence, decoys states are measuring the loss of the channel during a key exchange to bound the knowledge that could be gain by an eavesdropper. 

By measuring different intensities in a decoy state protocol, we can measure

\begin{equation}
	Q_{\mu_a \mu_b}^Z = \sum_{n,m=0} e^{-(\mu_a + \mu_b)}\frac{\mu_a^n}{n!}\frac{\mu_b^m}{m!} Y_{n,m}^Z
\end{equation}

\begin{equation}
	Q_{\mu_{a} \mu_{b}}^X E^{X}_{\mu_{a} \mu_{b}}=\sum_{n, m=0} e^{-\left(\mu_{\mathrm{a}}+\mu_{\mathrm{b}}\right)} \frac{q_{\mathrm{a}}^{n}}{n !} \frac{q_{\mathrm{b}}^{m}}{m !} Y^{X}_{n, m} E^{X}_{n, m}
\end{equation}

where $\mu_a$ ($\mu_b$) are the intensities of Alice's (Bob's) pulses.

\begin{equation}
	\underline{Y_{11}^Z} = \frac{1}{\left(\mu_{\mathrm{a}}-\omega_{\mathrm{a}}\right)\left(\mu_{\mathrm{b}}-\omega_{\mathrm{b}}\right)\left(v_{\mathrm{a}}-\omega_{\mathrm{a}}\right)\left(\nu_{\mathrm{b}}-\omega_{\mathrm{b}}\right)\left(\mu_{\mathrm{a}}-v_{\mathrm{a}}\right)}
\end{equation}

\begin{equation}
	\overline{E_{11}^Z} = \frac{1}{\left(v_{\mathrm{a}}-\omega_{\mathrm{a}}\right)\left(v_{\mathrm{b}}-\omega_{\mathrm{b}}\right) \underline{Y^{X}_{1,1}}}
\end{equation}

We can use the decoy sates in $X$ to bound the single photon events in $Z$ \cite{zhou2016}.

\subsection{Shared Resources}

\section{Integrated Transmitters}

\subsection{Laser}

\subsection{Thermo-Optic Phase Modulators}

\subsection{Electro-Optic Phase Modulators}

\section{Receiver}

\subsection{Fibre components}

\subsection{Superconducting Detectors}

\section{Results}

\subsection{Phase Randomised Transmitters}

\subsection{2GHz Clock Rate}

\section{Outlook}

\subsection{Finite Key Effects}

As this demonstration was focussed towards the technology, we have not included analysis of finite key effects. The optimal method of including finite key effects is given in Ref. \cite{zhou2016}.

Statistical fluctuations in the measurements mean that the values used to estimate the single photon cases are not infinitely accurate. 

\subsection{Improved Transmitters}

\begin{figure}[tbp]
	\includegraphics[width=\textwidth]{HHI_Transmitter}
	\caption[Latest generation InP Transmitter Device]{There are many ways of improving the QKD transmitters. For example, encoding in time-bin using a delay line to separate the pulses or generating different states using independent lasers.}
\end{figure}

\subsection{Security of Transmitters}

The security of the transmitters is still important \cite{makarov2019}.

\subsection{Multiplexing}

\subsection{Miniaturised Electronics}


%=========================================================